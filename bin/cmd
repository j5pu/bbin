#!/bin/sh

#######################################
# show usage
# Arguments:
#   1
#######################################
__cmd_help() {
  >&2 cat <<EOF
usage: ${0##*/} [command...]
       . ${0##*/}.sh; ${0##*/} [function...]
       ${0##*/} [-h|--help|help]

command, builtin, function, alias exists

Arguments:
  [command...]          command, builtin and function or alias when sourced

Commands:
   -h, --help, help     display this help and exit.

Returns:
   1 if at least one of commands does not exist
EOF
}

#######################################
# command or commands exists
# Arguments:
#  command [command]    command or commands
# Returns:
#  1 if any of the command does not exist
#######################################
cmd() {
  if test $# -eq 0; then
    __cmd_help "$@"; return 1
  else
    case "$1" in
      -h|--help|help) __cmd_help; return 0 ;;
    esac
  fi

  if [ $# -eq 1 ]; then
    type "$1" >/dev/null 2>&1
  else
    GENERATED="$(mktemp)"
    type "$@" >/dev/null 2>"${tmp}"
    ! test -s "${tmp}" || grep -qv "not found" "${tmp}"
  fi
}

case "${0##*/}" in
  cmd|cmd.sh) set -eu; cmd "$@" ;;
esac

